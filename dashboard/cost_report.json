{
  "title": "Cost Report",
  "image": null,
  "mobileHide": false,
  "mobileOrder": null,
  "configuration": {
    "description": "",
    "widgets": {
      "657e36b3-4b1d-d2e6-e4a0-0a60516ae576": {
        "isSystemType": false,
        "bundleAlias": "moldmecca_selector_widgets",
        "typeAlias": "report_selector",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 9,
        "sizeY": 1,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "9ac1ab70-6e4d-f8f1-1c9e-6f6bc323476b",
              "filterId": null,
              "dataKeys": []
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "var(--tb-service-accent)",
          "padding": "0px",
          "settings": {
            "widget": {
              "originWidth": 1630
            }
          },
          "title": "thingplus.menu.cost-report",
          "showTitleIcon": false,
          "titleTooltip": "",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "cursor": "default"
          },
          "titleStyle": {
            "font-family": "var(--tb-config-font-family)",
            "font-size": "2em",
            "font-weight": 500,
            "letter-spacing": "-0.05em",
            "color": "var(--tb-service-font-5)"
          },
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "657e36b3-4b1d-d2e6-e4a0-0a60516ae576"
      },
      "9dbe0b1f-6889-31ea-0aed-1bbadae22380": {
        "isSystemType": false,
        "bundleAlias": "moldmecca_report_widgets",
        "typeAlias": "cost_report",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "9ac1ab70-6e4d-f8f1-1c9e-6f6bc323476b",
              "filterId": null,
              "dataKeys": []
            },
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "50898519-50c2-0893-0ff4-4a68036e4a97",
              "filterId": null,
              "dataKeys": []
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "widget": {
              "originWidth": 1630
            }
          },
          "title": "thingplus.menu.cost-report",
          "showTitleIcon": false,
          "titleTooltip": "",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "cursor": "default",
            "box-shadow": "0px 2px 10px 0 rgba(0, 0, 0, 0.04)"
          },
          "titleStyle": {
            "font-family": "var(--tb-config-font-family)",
            "font-size": "1.6em",
            "font-weight": 600,
            "letter-spacing": "var(--tb-config-letter-spacing)",
            "color": "var(--tb-service-font-5)"
          },
          "noDataDisplayMessage": "",
          "showLegend": false,
          "actions": {
            "headerButton": [],
            "widgetHeaderButton": [
              {
                "name": "Download",
                "icon": "file_download",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "let { custom, $scope } = widgetContext;\n\nlet csv = $scope.thList.map(x => x.label) + '\\r\\n';\n\nfor (let i in custom.mainData) {\n  let datas = [];\n  for (let j in $scope.thList) {\n    let formatter = $scope.thList[j].formatter;\n    let data = custom.mainData[i][$scope.thList[j].key];\n    if (formatter) {\n      data = formatter(data);\n    }\n    if ($scope.thList[j].key == 'deviceName') {\n      datas.push('\"' + data + '\"');\n    } else {\n      datas.push(data);\n    }\n  }\n  csv += datas.join(',') + '\\r\\n';\n}\n\nfileDownload(csv);\n\nfunction fileDownload(content) {\n  let blob = new Blob(['\\ufeff' + content], {\n    type: 'application/csv;charset=utf-8;',\n  });\n  let elem = window.document.createElement('a');\n  elem.href = window.URL.createObjectURL(blob);\n  elem.download = `Cost_Report_${moment(custom.startTs).format('YYYY-MM-DD')} ${moment(custom.endTs).format(\n    'YYYY-MM-DD'\n  )}.csv`;\n  document.body.appendChild(elem);\n  elem.click();\n  document.body.removeChild(elem);\n}\n",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "ee410ecd-bef2-3b29-87ae-9f7f17b64227"
              }
            ]
          }
        },
        "row": 0,
        "col": 0,
        "id": "9dbe0b1f-6889-31ea-0aed-1bbadae22380"
      }
    },
    "states": {
      "default": {
        "name": "{i18n:thingplus.menu.cost-report}",
        "root": true,
        "layouts": {
          "main": {
            "widgets": {
              "657e36b3-4b1d-d2e6-e4a0-0a60516ae576": {
                "sizeX": 97,
                "sizeY": 4,
                "row": 0,
                "col": 0
              },
              "9dbe0b1f-6889-31ea-0aed-1bbadae22380": {
                "sizeX": 95,
                "sizeY": 40,
                "row": 4,
                "col": 1
              }
            },
            "gridSettings": {
              "backgroundColor": "var(--tb-service-background-4)",
              "columns": 97,
              "margin": 0,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": true,
              "mobileRowHeight": 70
            }
          }
        }
      }
    },
    "entityAliases": {
      "9ac1ab70-6e4d-f8f1-1c9e-6f6bc323476b": {
        "id": "9ac1ab70-6e4d-f8f1-1c9e-6f6bc323476b",
        "alias": "Current User Owner",
        "filter": {
          "type": "singleEntity",
          "resolveMultiple": false,
          "singleEntity": {
            "entityType": "CURRENT_USER_OWNER",
            "id": "13814000-1dd2-11b2-8080-808080808080"
          }
        }
      },
      "50898519-50c2-0893-0ff4-4a68036e4a97": {
        "id": "50898519-50c2-0893-0ff4-4a68036e4a97",
        "alias": "Selected Entity",
        "filter": {
          "type": "deviceSearchQuery",
          "resolveMultiple": true,
          "rootStateEntity": true,
          "stateEntityParamName": null,
          "defaultStateEntity": {
            "entityType": "CURRENT_USER_OWNER",
            "id": "13814000-1dd2-11b2-8080-808080808080"
          },
          "rootEntity": null,
          "direction": "FROM",
          "maxLevel": 3,
          "fetchLastLevelOnly": false,
          "relationType": "Contains",
          "deviceTypes": [
            "device"
          ]
        }
      },
      "c297a9bc-8241-1956-69ac-0c508584ea3e": {
        "id": "c297a9bc-8241-1956-69ac-0c508584ea3e",
        "alias": "Selected Entityx",
        "filter": {
          "type": "stateEntity",
          "resolveMultiple": false,
          "stateEntityParamName": null,
          "defaultStateEntity": null
        }
      }
    },
    "filters": {},
    "timewindow": {
      "displayValue": "",
      "hideInterval": false,
      "hideAggregation": false,
      "hideAggInterval": false,
      "hideTimezone": false,
      "selectedTab": 0,
      "realtime": {
        "realtimeType": 0,
        "interval": 1000,
        "timewindowMs": 60000,
        "quickInterval": "CURRENT_DAY"
      },
      "history": {
        "historyType": 0,
        "interval": 1000,
        "timewindowMs": 60000,
        "fixedTimewindow": {
          "startTimeMs": 1690963278563,
          "endTimeMs": 1691049678563
        },
        "quickInterval": "CURRENT_DAY"
      },
      "aggregation": {
        "type": "AVG",
        "limit": 25000
      }
    },
    "settings": {
      "stateControllerId": "entity",
      "showTitle": false,
      "showDashboardsSelect": true,
      "showEntitiesSelect": true,
      "showDashboardTimewindow": true,
      "showDashboardExport": true,
      "toolbarAlwaysOpen": true,
      "titleColor": "rgba(0,0,0,0.870588)",
      "showDashboardLogo": false,
      "dashboardLogoUrl": null,
      "hideToolbar": true,
      "showFilters": true,
      "showUpdateDashboardImage": true
    }
  },
  "name": "Cost Report"
}